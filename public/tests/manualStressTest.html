<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- MOBILE prevent zooming with mobile native gestures and use our own -->
  <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
  <!-- MOBILE Remove tap highlight on Windows Phone -->
  <meta name="msapplication-tap-highlight" content="no" />

	<script src="/assets/lib/pixi/pixi.js"></script>
  <script src="/assets/lib/jquery/jquery-css-ajax-effects.min.js"></script>
	<!-- purely for internet explorer. Though I think this issue is only in EI11,not in edge? -->
	<script src="/assets/lib/polyfills/es6StringPoly/es6StringPoly.js"></script>
  <script src="/assets/lib/q/q.js"></script>
  <script src="/assets/lib/hamsterjs/hamster.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.4/hammer.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"></script>
  <script src="/assets/lib/loglevel/loglevel.min.js"></script>
  <script>log.enableAll();</script>
	<script src="/jspm_packages/system.js"></script>
	<script src="/config.js"></script>
</head>

<body>
  <canvas id="mapCanvas" height="600" width="1200">
    Canvas not supported!
  </canvas>

  <div id="testNotification" style="position:fixed; bottom:100px; left:50px;font-size: 20px;color:red;">
    WAIT FOR THE MODULES TO LOAD!
  </div>
  <div style="position:fixed; bottom:0px; left:0px;">
    <div style="display: inline-block;">
      <button id="testFullscreen">
        fullscreen
      </button>
    </div>
    <div style="display: inline-block;background-color: white;margin:2em;">
      mapsize (pixels):
      <input id="hexaTiles" value="8000" type="text">,
      cache:
      <input id="cache" type="checkbox" checked>
      <button id="changeValues">
        START!
      </button>
    </div>
  </div>

  <div id="dialog_select" style="display:none;">
    MODAL WINDOW
  </div>

  <script>
    (function () {
      /* global System */

      'use strict';

  		System.import('/tests/manual/stressTest.es6').then(function() {
        var mapsizeElement = document.getElementById("hexaTiles");
        var cacheElement = document.getElementById("cache");
        var currentMapSize, mapData;
        var cacheMap = true;

        document.getElementById("testNotification").textContent = "START THE TESTS BY SELECTING VALUES BELOW AND CLICKING START!";

        document.getElementById("changeValues").addEventListener("click", function() {
          document.getElementById("testNotification").style.display = "none";
          currentMapSize = mapsizeElement.value;
          cacheMap = cacheElement.checked;

          mapData = window.getMapData(currentMapSize);
          window.map = window.initMap(mapData, {
            mapsize: currentMapSize,
            cache: cacheMap
          });
        });
  		});
    })();
	</script>
</body>
</html>
