<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\components\map\extensions\hexagons\utils\hexagonMath.js - FlaTWorld</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="FlaTWorld" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/eventListeners.html">eventListeners</a></li>
                                <li><a href="../classes/extensions.baseEventlisteners.html">extensions.baseEventlisteners</a></li>
                                <li><a href="../classes/extensions.hexagons.ObjectHexaTerrain.html">extensions.hexagons.ObjectHexaTerrain</a></li>
                                <li><a href="../classes/extensions.hexagons.ObjectHexaUnit.html">extensions.hexagons.ObjectHexaUnit</a></li>
                                <li><a href="../classes/extensions.hexagons.selectHexagonObject.html">extensions.hexagons.selectHexagonObject</a></li>
                                <li><a href="../classes/extensions.hexagons.setupHexagonClick.html">extensions.hexagons.setupHexagonClick</a></li>
                                <li><a href="../classes/extensions.hexagons.utils.html">extensions.hexagons.utils</a></li>
                                <li><a href="../classes/extensions.hexagons.utils.getHexagonPoints.utils.html">extensions.hexagons.utils.getHexagonPoints.utils</a></li>
                                <li><a href="../classes/extensions.mapDrag.html">extensions.mapDrag</a></li>
                                <li><a href="../classes/extensions.mapMovement.html">extensions.mapMovement</a></li>
                                <li><a href="../classes/extensions.mapZoom.html">extensions.mapZoom</a></li>
                                <li><a href="../classes/Flatworld.html">Flatworld</a></li>
                                <li><a href="../classes/generalUtils.polyfills.html">generalUtils.polyfills</a></li>
                                <li><a href="../classes/log.html">log</a></li>
                                <li><a href="../classes/mapApi.html">mapApi</a></li>
                                <li><a href="../classes/MapDataManipulator.html">MapDataManipulator</a></li>
                                <li><a href="../classes/mapEvents.html">mapEvents</a></li>
                                <li><a href="../classes/maplayers.MapLayer.html">maplayers.MapLayer</a></li>
                                <li><a href="../classes/maplayers.MapLayerParent.html">maplayers.MapLayerParent</a></li>
                                <li><a href="../classes/maplayers.MapSubcontainer.html">maplayers.MapSubcontainer</a></li>
                                <li><a href="../classes/mapStates.html">mapStates</a></li>
                                <li><a href="../classes/ObjectManager.html">ObjectManager</a></li>
                                <li><a href="../classes/objects.ObjectSprite.html">objects.ObjectSprite</a></li>
                                <li><a href="../classes/objects.ObjectSpriteTerrain.html">objects.ObjectSpriteTerrain</a></li>
                                <li><a href="../classes/objects.ObjectSpriteUnit.html">objects.ObjectSpriteUnit</a></li>
                                <li><a href="../classes/Preload.html">Preload</a></li>
                                <li><a href="../classes/UI.html">UI</a></li>
                                <li><a href="../classes/UIs.default.html">UIs.default</a></li>
                                <li><a href="../classes/UITemplateBase.html">UITemplateBase</a></li>
                                <li><a href="../classes/utilities.arrays.html">utilities.arrays</a></li>
                                <li><a href="../classes/utilities.environmentDetections.html">utilities.environmentDetections</a></li>
                                <li><a href="../classes/utils.dataManipulation.html">utils.dataManipulation</a></li>
                                <li><a href="../classes/utils.effects.html">utils.effects</a></li>
                                <li><a href="../classes/utils.environment.html">utils.environment</a></li>
                                <li><a href="../classes/utils.general.html">utils.general</a></li>
                                <li><a href="../classes/utils.mouse.html">utils.mouse</a></li>
                                <li><a href="../classes/utils.Quadtree.html">utils.Quadtree</a></li>
                                <li><a href="../classes/utils.resize.html">utils.resize</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\components\map\extensions\hexagons\utils\hexagonMath.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
(function () {
  &#x27;use strict&#x27;;

  /*-----------------------
  ---------- API ----------
  -----------------------*/
  window.flatworld.extensions.hexagons.utils.calcShortDiagonal = calcShortDiagonal;
  window.flatworld.extensions.hexagons.utils.calcLongDiagonal = calcLongDiagonal;
  window.flatworld.extensions.hexagons.utils.hexaHitTest = hexaHitTest;
  window.flatworld.extensions.hexagons.utils.getClosestHexagonCenter = getClosestHexagonCenter;
  window.flatworld.extensions.hexagons.utils.init = init;

  /*-----------------------
  ------- VARIABLES -------
  -----------------------*/
  var point, radius;

  /**
   * Utility module, for making different calculations and tests when hexagon based grid map in use
   *
   * @class extensions.hexagons.utils
   */
  /*-----------------------
  --------- PUBLIC --------
  -----------------------*/
  /**
   * Calculates the hexagons:
   * innerDiameter
   * - Vertical / Flat hexagons height
   * - Horizontal / pointy hexagons width
   *
   * @method calcLongDiagonal
   * @static
   * @param {float} value - Usually the radius of the hexagon
   * @param {string} type - If you provide something else than radius, where the calculation is based from
   * @param {integer} precision - How many decimals to round
   */
  function calcShortDiagonal(value, type = &quot;radius&quot;, precision = 3) {
    var answer;

    precision = Math.round(precision);

    if (type === &quot;radius&quot;) {
      answer = value * Math.sqrt(3);
    }

    return Number( answer.toFixed(precision) );
  }
  /** Calculates the hexagons:
   * outerDiameter
   * - Vertical / Flat hexagons width
   * - Horizontal / pointy hexagons height
   *
   * @method calcLongDiagonal
   * @static
   * @param {float} value         Usually the radius of the hexagon
   * @param {string} type         If you provide something else than radius, where the calculation is based from
   * @param {integer} precision   How many decimals to round
   */
  function calcLongDiagonal(value, type = &quot;radius&quot;, precision = 3) {
    var answer;

    if (type === &quot;radius&quot;) {
      answer = value * 2;
    }

    return Number( answer.toFixed(precision) );
  }
  /**
   * Test do the given coordinates hit the hexagon, given by the points container / array
   *
   * @static
   * @method hexaHitTest
   * @param  {PIXI.Point[]} points             Array of PIXI.points
   * @param  {Object} hitCoords         The coordinates to test against
   * @param  {Integer} hitCoords.x      X coordinate
   * @param  {Integer} hitCoords.y      Y coordinate
   * @param  {Object} offsetCoords      offsetCoordinates that are added to the hitCoordinates. Separate because these are outside the
   * given array.
   * @param  {Integer} offsetCoords.x   X coordinate
   * @param  {Integer} offsetCoords.y   Y coordinate
   * @return {Boolean}                  Is the coordinate inside the hexagon or not
   */

  function hexaHitTest(points, hitCoords = {x:0, y:0}, offsetCoords = {x:0, y:0}) {
    var realPolygonPoints;

    realPolygonPoints = points.map(point =&gt; {
      return {
        x: point.x + offsetCoords.x,
        y: point.y + offsetCoords.y
      };
    });

    return pointInPolygon(hitCoords, realPolygonPoints);
  }
  /**
   * Set hexagon radius
   *
   * @static
   * @method setRadius
   * @param {Number} givenRadius    The radius of the hexagon
   */
  function init(givenRadius, givenPoint) {
    radius = givenRadius;
    point = givenPoint;
  }
  /**
   * Calculates the closest hexagon center coordinates, for the given coordinates. So aligning the given coordinates to proper hexagon
   * coordinates
   *
   * @static
   * @method getClosestHexagonCenter
   * @requires setRadius has to be set
   */
  function getClosestHexagonCenter(coordinates) {}
  /*-----------------------
  --------- PRIVATE -------
  -----------------------*/
  /**
   * credits to: https://github.com/substack/point-in-polygon
   * Tests whether the given point / coordinate is inside the given points. Assuming the points form a polygon
   *
   * @static
   * @private
   * @method pointInPolygon
   * @param  {Object} point             The coordinates to test against
   * @param  {Integer} hitCoords.x      X coordinate
   * @param  {Integer} hitCoords.y      Y coordinate
   * @param  {Integer[]} vs             The points of the polygon to test [0] === x-point, [1] === y-point
   * @return {Boolean}                  Is the coordinate inside the hexagon or not
   */
  function pointInPolygon(point, vs) {
    var x = point.x;
    var y = point.y;
    var inside = false;
    var xi, xj, yi, yj, intersect;

    for (let i = 0, j = vs.length - 1; i &lt; vs.length; j = i++) {
      xi = vs[i].x;
      yi = vs[i].y;
      xj = vs[j].x;
      yj = vs[j].y;
      intersect = ((yi &gt; y) !== (yj &gt; y)) &amp;&amp;
          (x &lt; (xj - xi) * (y - yi) / (yj - yi) + xi);

      if (intersect) {
        inside = !inside;
      }
    }

    return inside;
  }
})();
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
